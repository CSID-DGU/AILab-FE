# 3.1 서버 사용 신청

## 기본 정보
- **API**: 서버 사용 신청서 저장
- **관리자**: No
- **사용자**: Yes
- **카테고리**: 사용 신청
- **상세기능**: 서버 사용을 위한 신청서 작성 및 제출
- **디자인**: Not started
- **백엔드 구현**: Done
- **프론트 구현**: Not started

## 사용사례 명세

| **항목** | **내용** |
|----------|----------|
| **사용사례** | 사용자가 서버 사용 신청하기 |
| **액터** | 일반 사용자 |
| **목적** | 사용자가 서버 사용을 위한 신청서를 작성한다. |
| **시작조건** | 사용자는 웹 사이트에 로그인 해야한다. |

## 사건의 흐름

| **순서** | **액터 측 액션** | **시스템 측 반응** |
|----------|------------------|-------------------|
| 1 | 사용자가 서버 사용 신청 버튼을 클릭한다. |  |
| 2 |  | 서버 사용 신청 폼(우분투 계정명, 컨테이너 접속 비밀번호, 사용할 노드, 사용 만료일, 컨테이너 볼륨 사이즈, CUDA 버전, 사용 목적, 그룹 선택)을 제공한다. |
| 3 | 서버 사용 신청 폼을 작성하여 제출한다. |  |
| 4 |  | 입력한 정보가 유효한지 확인한다. |
| 5 |  | 입력 정보가 유효하면 Requests 테이블에 PENDING 상태로 사용 신청을 저장한다. |
| 6 |  | 신청 완료 메시지를 표시하고 사용자를 메인 화면으로 이동시킨다. |

## 대안 흐름

| **단계** | **대안 상황** |
|----------|---------------|
| 4 | **입력 정보가 유효하지 않음** |
|  | 4-a. 이미 존재하는 우분투 계정일 경우, 다시 입력하라고 요청한다. |
|  | 4-b. 필수 입력 필드가 누락된 경우 해당 필드를 입력하라고 요청한다. |
|  | 4-c. 사용 만료일이 현재 날짜보다 이전인 경우 올바른 날짜를 입력하라고 요청한다. |
|  | 4-d. 컨테이너 볼륨 사이즈가 허용 범위를 벗어난 경우 적절한 사이즈를 입력하라고 요청한다. |
|  | 4-e. 선택한 노드가 존재하지 않는 경우 올바른 노드를 선택하라고 요청한다. |

## 종료 조건
서버 사용 신청이 Requests 테이블에 PENDING 상태로 저장되면 해당 흐름을 종료한다.

## 신청서 입력 필드

### 필수 필드
- **우분투 계정명** (ubuntu_username) - 중복 불가
- **사용할 노드** (node_id) - Nodes 테이블의 기존 노드 중 선택
- **사용 만료일** (expires_at)
- **컨테이너 볼륨 사이즈** (volume_size_byte)
- **CUDA 버전** (cuda_version)
- **사용 목적** (usage_purpose)

### 선택 필드
- **그룹** (ubuntu_gid) - Groups 테이블의 기존 그룹 중 선택
- **추가 정보** (form_answers) - JSON 형태로 저장

## 추가 사항
- 신청 시 컨테이너 이미지는 관리자가 승인 단계에서 지정
- 실제 시스템 계정은 승인 시 자동 할당
- 신청 완료 후 관리자의 승인을 대기하는 상태가 됨