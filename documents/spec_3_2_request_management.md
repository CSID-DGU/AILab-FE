# 3.2 사용 신청 관리

## 기본 정보
- **API**: 전체 사용 신청 목록 조회, 개별 사용 신청 조회, 사용 신청 승인, 사용 신청 거절
- **관리자**: Yes
- **사용자**: No
- **카테고리**: 사용 신청 관리
- **상세기능**: 승인 시 관리자는 컨테이너 이미지, 시스템 계정을 할당하고 볼륨 생성 API를 호출
- **디자인**: Not started
- **백엔드 구현**: Not started
- **프론트 구현**: Not started

## 사용사례 명세

| **항목** | **내용** |
|----------|----------|
| **사용사례** | 관리자가 서버 사용 신청을 관리하기 |
| **액터** | 관리자 |
| **목적** | 신청 내역 조회 및 승인/거절을 효율적으로 처리한다. |
| **시작조건** | 관리자는 웹 사이트에 로그인 해야한다. |

## 사건의 흐름

| **순서** | **액터 측 액션** | **시스템 측 반응** |
|----------|------------------|-------------------|
| 1 | 관리자가 사용 신청 관리 메뉴를 클릭한다. |  |
| 2 |  | 모든 신청을 상태별로 표시한다. (대기중, 승인됨, 거절됨) |
| 3 | 특정 신청을 선택하여 상세 정보를 확인한다. |  |
| 4 |  | 신청 상세 정보와 처리 옵션(승인/거절)을 제공한다. 신청자 정보도 함께 표시한다. |

## 승인 처리 흐름

| **순서** | **액터 측 액션** | **시스템 측 반응** |
|----------|------------------|-------------------|
| 5 | 승인 시: 컨테이너 이미지, 시스템 계정을 지정하여 승인한다. |  |
| 6 |  | 해당 신청의 상태를 '승인됨'으로 변경하고, 이미지와 시스템 계정 정보를 저장한다. |
| 7 |  | 승인 일시를 기록한다. |
| 8 |  | 시스템은 볼륨 생성 API를 호출한다. |
| 9 |  | 승인 완료 후 사용자에게 Slack DM과 Email로 서버 사용 방법을 전송한다. |

## 거절 처리 흐름

| **순서** | **액터 측 액션** | **시스템 측 반응** |
|----------|------------------|-------------------|
| 5 | 거절 시: 거절 사유를 입력하여 거절한다. |  |
| 6 |  | 해당 신청의 상태를 '거절됨'으로 변경하고 거절 사유를 저장한다. |
| 7 |  | 처리 일시를 기록한다. |

## 대안 흐름

| **단계** | **대안 상황** |
|----------|---------------|
| 2 | **신청 내역이 없는 경우** |
|  | 2-a. 처리할 신청이 없는 경우 "신청 내역이 없습니다" 메시지를 표시한다. |
| 5 | **승인 정보 입력 오류** |
|  | 5-a. 필수 승인 정보(컨테이너 이미지, 시스템 계정)가 누락된 경우 해당 정보를 입력하라고 요청한다. |
|  | 5-b. 이미 사용 중인 ubuntu_uid인 경우 다른 계정을 할당하라고 요청한다. |
|  | 5-c. 존재하지 않는 컨테이너 이미지를 선택한 경우 올바른 이미지를 선택하라고 요청한다. |
| 8 | **볼륨 생성 실패** |
|  | 8-a. 볼륨 생성 API 호출이 실패한 경우 오류 메시지를 표시하고 승인을 취소한다. |
|  | 8-b. 상태를 다시 '대기중'으로 되돌리고 에러 로그를 기록한다. |

## 종료 조건
사용 신청 내역이 승인 또는 거절되어 시스템에 저장되면 해당 흐름을 종료한다.

## 표시되는 신청 정보

### 기본 신청 정보
- **신청 ID**
- **신청자** (이름, 이메일)
- **우분투 계정명**
- **요청 노드**
- **사용 만료일**
- **볼륨 사이즈**
- **CUDA 버전**
- **사용 목적**
- **신청일**

### 상태 정보
- **처리 상태**
- **승인일** (승인된 경우)
- **승인/거절 사유**

### 할당된 정보 (승인된 경우)
- **할당된 시스템 계정**
- **컨테이너 이미지**

## 승인 시 필요한 정보

### 필수 지정 항목
- **컨테이너 이미지** - 사용 가능한 이미지 목록에서 선택
- **시스템 계정** - 고유한 시스템 계정 자동 할당 또는 수동 지정

## 거절 시 필요한 정보
- **거절 사유** - 사용자에게 전달될 사유