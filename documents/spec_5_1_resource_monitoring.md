# 5.1 리소스 사용량 모니터링

## 기본 정보
- **API**: 프로메테우스/그라파나 연동
- **관리자**: Yes
- **사용자**: Yes
- **카테고리**: 자원 관리
- **상세기능**: ResourceGroup으로 조회하고(필터링), Node별 현황 리스트를 조회한다.
- **디자인**: Not started
- **백엔드 구현**: Not started
- **프론트 구현**: Not started

## 사용사례 명세

| **항목** | **내용** |
|----------|----------|
| **사용사례** | 프로메테우스와 그라파나로 서버의 자원 사용량을 모니터링하기 |
| **액터** | 관리자/일반 사용자 |
| **목적** | 각 서버의 자원 사용량을 모니터링한다. |
| **시작조건** | 관리자/일반 사용자는 웹 사이트에 로그인 해야한다. |

## 사건의 흐름

| **순서** | **액터 측 액션** | **시스템 측 반응** |
|----------|------------------|-------------------|
| 1 | 자원 사용량 모니터링 버튼을 클릭한다. |  |
| 2 |  | ResourceGroup 선택 옵션과 모니터링 화면을 제공한다. |
| 3 | 원하는 ResourceGroup을 선택한다. (선택 사항) |  |
| 4 |  | 선택된 ResourceGroup에 해당하는 프로메테우스로 모니터링하고 그라파나로 시각화된 데이터를 웹에 iframe으로 띄운다. |
| 5 | 현재 서버의 자원 사용량을 확인한다. |  |

## 대안 흐름

| **단계** | **대안 상황** |
|----------|---------------|
| 2 | **사용자 권한에 따른 접근 제한** |
|  | 2-a. 일반 사용자는 자신이 할당받은 ResourceGroup만 조회할 수 있다. |
|  | 2-b. 관리자는 모든 ResourceGroup을 조회할 수 있다. |
| 4 | **ResourceGroup이 선택되지 않은 경우** |
|  | 4-a. ResourceGroup이 선택되지 않은 경우 전체 시스템 현황을 표시한다. |
| 4 | **모니터링 데이터 로드 실패** |
|  | 4-a. 그라파나 서버 연결 실패 시 오류 메시지를 표시한다. |
|  | 4-b. 데이터가 없는 경우 "데이터를 불러올 수 없습니다" 메시지를 표시한다. |

## 종료 조건
자원 사용량이 화면에 표시되면 해당 흐름을 종료한다.

## 모니터링 화면 구성

### 필터링 옵션
- **ResourceGroup 선택** (드롭다운 메뉴)
- **시간 범위 선택** (1시간, 6시간, 24시간, 7일)
- **새로고침 간격 설정** (실시간, 5분, 10분)

### 표시되는 메트릭
- **CPU 사용률** (Node별, 전체)
- **메모리 사용률** (Node별, 전체)
- **GPU 사용률** (사용 가능한 경우)
- **네트워크 I/O**
- **디스크 I/O**
- **스토리지 사용량**

### Node별 현황 리스트
- **Node 이름**
- **현재 상태** (온라인/오프라인)
- **CPU/메모리 사용률** (요약)
- **실행 중인 컨테이너 수**
- **ResourceGroup 정보**

### 그라파나 연동
- **iframe을 통한 그라파나 대시보드 임베드**
- **사용자별 맞춤 대시보드** (권한에 따라)
- **실시간 데이터 업데이트**